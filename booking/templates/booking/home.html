{% extends 'booking/base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
<div class="text-center">
    <h2 class="mb-4">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ "–ì—É—Ä–º–∞–Ω"!</h2>
    <p class="lead">–õ—É—á—à–µ–µ –º–µ—Å—Ç–æ –¥–ª—è —É—é—Ç–Ω–æ–≥–æ —É–∂–∏–Ω–∞ —Å —Å–µ–º—å–µ–π –∏ –¥—Ä—É–∑—å—è–º–∏.</p>
</div>

{% if not user.is_authenticated %}
<div class="card mx-auto mt-4" style="max-width: 400px;">
    <div class="card-body">
        <h4 class="card-title text-center">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h4>
        <form method="post" action="{% url 'register' %}" id="registration-form">
            {% csrf_token %}

            <div class="mb-3">
                <label class="form-label">–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</label>
                <input
                    type="text"
                    name="username"
                    class="form-control"
                    required
                    placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                >
                <small class="form-text text-muted">–¢–æ–ª—å–∫–æ –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã –∏ @/./+/-/_</small>
            </div>

            <div class="mb-3">
                <label class="form-label">–ü–∞—Ä–æ–ª—å:</label>
                <input
                    type="password"
                    name="password1"
                    class="form-control"
                    required
                    placeholder=""
                    id="password-field"
                >
                <small class="form-text text-muted">–ù–µ –º–µ–Ω–µ–µ 5 —Å–∏–º–≤–æ–ª–æ–≤</small>
                <div id="password-error" class="text-danger small mt-1" style="display: none;">
                    –ü–∞—Ä–æ–ª—å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –º–∏–Ω–∏–º—É–º 5 —Å–∏–º–≤–æ–ª–æ–≤
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è:</label>
                <input
                    type="password"
                    name="password2"
                    class="form-control"
                    required
                    placeholder=""
                >
                <small class="form-text text-muted">–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –µ—â—ë —Ä–∞–∑</small>
            </div>

            <button type="submit" class="btn btn-primary w-100">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </form>

        <hr class="my-4">

        <div class="text-center">
            <a href="{% url 'register_phone' %}" class="btn btn-outline-secondary w-100">
                üì± –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            </a>
        </div>
    </div>
</div>
{% else %}
<div class="alert alert-success text-center mt-4">
    –í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã! –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ <a href="{% url 'booking_list' %}" class="alert-link">–±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</a>.
</div>
{% endif %}

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('registration-form');
        const passwordField = document.getElementById('password-field');
        const passwordError = document.getElementById('password-error');

        form.addEventListener('submit', function(e) {
            if (passwordField.value.length < 5) {
                e.preventDefault();
                passwordError.style.display = 'block';
                passwordField.classList.add('is-invalid');
            } else {
                passwordError.style.display = 'none';
                passwordField.classList.remove('is-invalid');
            }
        });

        passwordField.addEventListener('input', function() {
            if (this.value.length < 5) {
                passwordError.style.display = 'block';
                this.classList.add('is-invalid');
            } else {
                passwordError.style.display = 'none';
                this.classList.remove('is-invalid');
            }
        });
    });
</script>
{% endblock %}
