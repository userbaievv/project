{% extends 'booking/base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>Мои бронирования</h2>

  <form method="get" class="mb-3 d-flex gap-3 align-items-end">
    <div>
      {{ filter_form.date.label_tag }}<br>
      {{ filter_form.date }}
    </div>
    <div>
      {{ filter_form.guests_count.label_tag }}<br>
      {{ filter_form.guests_count }}
    </div>
    <div>
      {{ filter_form.sort_by.label_tag }}<br>
      {{ filter_form.sort_by }}
    </div>
    <div>
      <button type="submit" class="btn btn-secondary mt-4">Фильтр</button>
    </div>
  </form>

  <a href="{% url 'booking_create' %}" class="btn btn-success mb-3">Создать новое бронирование</a>

  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Номер стола</th>
        <th>Кол-во гостей</th>
        <th>Дата</th>
        <th>Время</th>
        {% if user.is_superuser %}
          <th>Пользователь</th>
        {% endif %}
        <th>Действия</th>
      </tr>
    </thead>
    <tbody>
      {% for booking in bookings %}
      <tr>
        <td>{{ booking.table_number }}</td>
        <td>{{ booking.guests_count }}</td>
        <td>{{ booking.booking_date }}</td>
        <td>{{ booking.booking_time }}</td>
        {% if user.is_superuser %}
          <td>{{ booking.customer.username }}</td>
        {% endif %}
        <td>
          <a href="{% url 'booking_update' booking.pk %}" class="btn btn-warning btn-sm">Изменить</a>
          <a href="{% url 'booking_delete' booking.pk %}" class="btn btn-danger btn-sm">Удалить</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="5" class="text-center">Бронирований нет.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}